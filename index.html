<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Navagraha Prati·π£·π≠hƒÅ Kramam</title>

<style>
:root{
  --bg1:#3b236b;
  --bg2:#5b2a86;
  --bg3:#7a3fa0;
  --card:rgba(255,255,255,.14);
  --text:#ffffff;
  --muted:rgba(255,255,255,.85);
  --good:#22c55e;
  --bad:#ef4444;
  --info:#3b82f6;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--text);
  background:linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
  min-height:100vh;
  padding:16px;
}

.wrap{max-width:980px;margin:0 auto}

h1{
  font-size:40px;
  font-weight:900;
  margin:8px 0 4px;
}

.subtitle{
  font-size:20px;
  color:var(--muted);
  margin-bottom:16px;
}

.row{
  display:flex;
  gap:14px;
  justify-content:center;
  flex-wrap:wrap;
  margin-bottom:18px;
}

button{
  font-size:18px;
  font-weight:700;
  padding:12px 20px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  background:rgba(255,255,255,.18);
  color:white;
}

button:hover{background:rgba(255,255,255,.28)}
button:disabled{opacity:.5}

.pill{
  max-width:780px;
  margin:0 auto 18px;
  padding:14px;
  border-radius:18px;
  font-size:20px;
  text-align:center;
}

.pill.good{background:rgba(34,197,94,.35)}
.pill.bad{background:rgba(239,68,68,.35)}
.pill.info{background:rgba(59,130,246,.35)}

.card{
  background:var(--card);
  border-radius:22px;
  padding:16px;
  margin-bottom:20px;
}

.title{
  font-size:24px;
  font-weight:800;
  text-align:center;
  margin-bottom:14px;
}

.board{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:14px;
  max-width:520px;
  margin:0 auto;
}

.slot{
  aspect-ratio:1/1;
  border-radius:20px;
  border:3px dashed rgba(255,255,255,.45);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  position:relative;
}

.slot.filled{
  border-style:solid;
  border-color:rgba(34,197,94,.7);
}

.slot.correct{
  box-shadow:0 0 0 5px rgba(34,197,94,.45);
}

.inner{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:6px;
  font-weight:900;
  color:#111827;
}

.planet{font-size:44px}
.name{font-size:22px}

.pool{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
}

@media (min-width:600px){
  .pool{grid-template-columns:repeat(4,1fr)}
}

.piece{
  aspect-ratio:1/1;
  border-radius:20px;
  border:3px solid rgba(255,255,255,.6);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

.piece.selected{
  box-shadow:0 0 0 5px rgba(34,197,94,.55);
}

.footer{
  text-align:center;
  font-size:16px;
  margin-top:12px;
  color:rgba(255,255,255,.85);
}
</style>
</head>

<body>
<div class="wrap">

  <div style="text-align:center">
    <h1>Navagraha Prati·π£·π≠hƒÅ Kramam</h1>
    <div class="subtitle">
      Learn the correct temple installation positions of the Navagrahas
    </div>
  </div>

  <div class="row">
    <button id="shuffle">üîÄ Shuffle</button>
    <button id="reset">üîÑ Reset</button>
    <button id="cancel" style="display:none">‚úñ Cancel</button>
  </div>

  <div id="message" class="pill" style="display:none"></div>

  <div class="card">
    <div class="title">Prati·π£·π≠hƒÅ Ma·πá·∏çala</div>
    <div id="board" class="board"></div>
  </div>

  <div class="card">
    <div class="title">Available Grahas</div>
    <div id="pool" class="pool"></div>
  </div>

  <div class="footer">
    Designed for learning ‚Ä¢ Shareable via WhatsApp ‚Ä¢ No installation required
  </div>

</div>

<script>
const deities = [
  { name:'Guru',    planet:'‚ôÉ', color:'#FFB84D' },
  { name:'Shukra',  planet:'‚ôÄ', color:'#FFF4A3' },
  { name:'Budha',   planet:'‚òø', color:'#90EE90' },
  { name:'Mangala', planet:'‚ôÇ', color:'#FF6B6B' },
  { name:'Surya',   planet:'‚òâ', color:'#FFD700' },
  { name:'Shani',   planet:'‚ôÑ', color:'#4169E1' },
  { name:'Chandra', planet:'‚òΩ', color:'#E6E6FA' },
  { name:'Rahu',    planet:'‚òä', color:'#8B4513' },
  { name:'Ketu',    planet:'‚òã', color:'#708090' }
];

let pieces = shuffle([...Array(9).keys()]);
let board = Array(9).fill(null);
let selected = null;

const boardEl = document.getElementById("board");
const poolEl = document.getElementById("pool");
const msgEl = document.getElementById("message");
const cancelBtn = document.getElementById("cancel");

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}

function show(type,html){
  msgEl.className="pill "+type;
  msgEl.innerHTML=html;
  msgEl.style.display="block";
}

function hide(){
  msgEl.style.display="none";
}

function render(){
  boardEl.innerHTML="";
  poolEl.innerHTML="";

  board.forEach((p,i)=>{
    const d=document.createElement("div");
    d.className="slot"+(p!==null?" filled":"")+(p===i?" correct":"");
    if(p!==null){
      d.style.background=deities[p].color;
      d.innerHTML=`<div class="inner">
        <div class="planet">${deities[p].planet}</div>
        <div class="name">${deities[p].name}</div>
      </div>`;
    }
    d.onclick=()=>place(i);
    boardEl.appendChild(d);
  });

  pieces.forEach(p=>{
    const d=document.createElement("div");
    d.className="piece"+(selected===p?" selected":"");
    d.style.background=deities[p].color;
    d.innerHTML=`<div class="inner">
      <div class="planet">${deities[p].planet}</div>
      <div class="name">${deities[p].name}</div>
    </div>`;
    d.onclick=()=>select(p);
    poolEl.appendChild(d);
  });
}

function select(p){
  if(selected!==null)return;
  selected=p;
  cancelBtn.style.display="inline-block";
  show("info",`Selected: <b>${deities[p].name}</b><br>Tap the correct position`);
  render();
}

function place(i){
  if(selected===null||board[i]!==null)return;

  if(selected===i){
    board[i]=selected;
    pieces=pieces.filter(x=>x!==selected);
    selected=null;
    cancelBtn.style.display="none";
    hide();

    if(board.every((x,idx)=>x===idx)){
      show("good","Perfect Prati·π£·π≠hƒÅ! üéâ");
    }
  }else{
    show("bad",`Incorrect placement for <b>${deities[selected].name}</b>.<br>Please try another square or Cancel.`);
  }
  render();
}

document.getElementById("cancel").onclick=()=>{
  selected=null;
  cancelBtn.style.display="none";
  hide();
  render();
};

document.getElementById("reset").onclick=()=>{
  pieces=shuffle([...Array(9).keys()]);
  board=Array(9).fill(null);
  selected=null;
  cancelBtn.style.display="none";
  hide();
  render();
};

document.getElementById("shuffle").onclick=()=>{
  pieces=shuffle(pieces);
  render();
};

render();
</script>
</body>
</html>
